Take the simulation programs for the single unreliable machine 
and the one for the N-machine flow line with 
reliable machines and develop a simulation program 
for an N-machine line with unreliable machines where all 
times are exponentially distributed with rates 
mu_i, p_i, and r_i for machine i. 
Assume as before blocking after service and 
as in today's lecture operation-dependent failures.

Hint: Take the simulation program for the N-machine line. 
Then define two new event types: MachineFailure and MachineRepair. 
Track for each machine the current state, which is either 1 (up) or 0 (down). 
Then, depending on the current state of any machine, 
determine the possible events and the time until this event. 
Figure out which event occurs next and execute that event, 
i.e., change the system state variable and update the time counter and the statistics.